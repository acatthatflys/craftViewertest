{"version":3,"sources":["src/craft.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAiBA,IAAM,WAAW,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AAC5C,IAAM,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;;IAC1B,KAAK;AAGC,UAHN,KAAK,GAGI;wBAHT,KAAK;EAMT;;;;;AAAA;cANI,KAAK;;SAWL,eAAC,SAAS,EAAE,EAAE,EAAC;;;AACnB,OAAI,OAAO,GAAG;AACZ,cAAU,EAAE,6BAA6B;AACzC,QAAI,EAAC,CAAC,SAAS,CAAC;IACjB,CAAC;AACF,cAAW,CAAC,GAAG,CAAC,gBAAgB,EAAE,OAAO,EAAE,UAAC,GAAG,EAAE,OAAO,EAAK;AAC5D,QAAI,GAAG,EAAE;AACR,OAAE,CAAC,GAAG,CAAC,CAAC;KACR,MAAM;AACN,SAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAC7C,WAAK,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC;AACzB,WAAK,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;AACrC,OAAE,CAAC,KAAK,CAAC,CAAC;KACV;IACD,CAAC,CAAC;GACH;;;SAEQ,qBAAE;;;AAGV,QAAI,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,EAAC;AAC1B,QAAM,KAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;AACtD,WAAO,CAAC,GAAG,CAAC,KAAI,CAAC,CAAC;AAClB,QAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,wCAAwC,CAAC,EAAE,KAAI,CAAC,EAAE;AACjE,SAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,KAAI,CAAC,CAAC;;KAEpD,MAAM;AACN,UAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,KAAI,CAAC,CAAC;MACpD;IACD;AACD,OAAI,CAAC,IAAI,GAAG,IAAI,KAAK,CAAC,QAAQ,EAAE,CAAC;AACjC,OAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAE,CAAC;AACpG,QAAK,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAErB,QAAI,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,EAAC;AAC1B,QAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAC,GAAG,EAAK;AACzC,SAAI,GAAG,EAAE;AACR,aAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;AAClC,aAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MACjB;KACD,CAAC,CAAC;IACH;AACD,OAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;GAE3B;;;QAvDI,KAAK","file":"src/craft.js","sourcesContent":["// function parseCraft(craft, cb){\r\n// \tlet PythonShell = require('python-shell');\r\n// \tlet options = {\r\n// \t\t\tscriptPath: 'E:\\\\projects\\\\CraftViewer\\\\',\r\n// \t\t\targs:[craft]\r\n// \t\t};\r\n// \tPythonShell.run('craftToJSON.py', options, function(err, results){\r\n// \t\tif (err) {\r\n// \t\t\tconsole.log(err);\r\n// \t\t\tcb(err);\r\n// \t\t} else {\r\n// \t\tconsole.log(results);\r\n// \t\t cb(null, JSON.parse(results.join('\\n')));\r\n// \t\t}\r\n// \t});\r\n// }\r\n\r\nconst PythonShell = require('python-shell');\r\nconst _ = require('underscore');\r\nclass Craft {\r\n\r\n\t\r\n\tconstructor() {\r\n\t\t// this.craft;\r\n\r\n\t}\r\n\r\n\r\n\t// //Takes in a .craft file and populates craft with with part/val entries\r\n\t// //Need to rewrite .craft parser in js\r\n\tparse(craftPath, cb){\r\n\t\tlet options = {\r\n\t\t\t\tscriptPath: 'E:\\\\projects\\\\CraftViewer\\\\',\r\n\t\t\t\targs:[craftPath]\r\n\t\t};\r\n\t\tPythonShell.run('craftToJSON.py', options, (err, results) => {\r\n\t\t\tif (err) {\r\n\t\t\t\tcb(err);\r\n\t\t\t} else {\r\n\t\t\t\tconst craft = JSON.parse(results.join('\\n'));\r\n\t\t\t\tthis.info = craft.VESSEL;\r\n\t\t\t\tthis.parts = _.omit(craft, 'VESSEL');\r\n\t\t\t\tcb(false);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadParts(){\r\n\r\n\t\t//Create Part objects\r\n\t\tfor(let part in this.parts){\r\n\t\t\tconst name = this.parts[part].part.split('_').shift();\r\n\t\t\tconsole.log(name);\r\n\t\t\tif (_.contains(['strutConnector, fuelLine, launchClamp1'], name)) {\r\n\t\t\t\tthis.parts[part] = new Part(this.parts[part], name);\r\n\t\t\t\t// this.parts[part] = new CompoundPart(this.parts[part], name);\r\n\t\t\t} else {\r\n\t\t\t\tthis.parts[part] = new Part(this.parts[part], name);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.mesh = new THREE.Object3D();\r\n\t\tthis.mesh.position.set( this.parts.PART1.pos[0], this.parts.PART1.pos[1], this.parts.PART1.pos[2] );\r\n\t\tscene.add(this.mesh);\r\n\t\t//Load mesh for each part\r\n\t\tfor(let part in this.parts){\r\n\t\t\tthis.parts[part].load(this.mesh, (err) => {\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\tconsole.log('Error loading part');\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.mesh.position.y -= 30;\r\n\r\n\t}\r\n\r\n}\r\n\r\n"]}